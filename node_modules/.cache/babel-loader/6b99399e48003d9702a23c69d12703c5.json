{"ast":null,"code":"var _jsxFileName = \"C:\\\\WebDev\\\\IvanOnTech-Moralis\\\\coin-exchange\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport React, { useEffect, useState } from 'react';\nimport CoinList from './components/CoinList/CoinList';\nimport AccountBalance from './components/AccountBalance/AccountBalance';\nimport AppHeader from './components/AppHeader/AppHeader';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COIN_COUNT = 10;\n\nconst formatPrice = price => parseFloat(Number(price).toFixed(3));\n\nfunction App(props) {\n  _s();\n\n  const [balance, setBalance] = useState(100000);\n  const [showBalance, setShowBalance] = useState(true);\n  const [coinData, setCoinData] = useState([]);\n\n  const componentDidMount = async () => {\n    //const response = await axios.get('https://api.coinpaprika.com/v1/coins');\n    const response = await axios.get('https://api.coingecko.com/api/v3/coins/');\n    const coinIds = response.data.slice(0, COIN_COUNT).map(coin => coin.id); //const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\n\n    const tickerUrl = 'https://api.coingecko.com/api/v3/coins/';\n    const promises = coinIds.map(id => axios.get(tickerUrl + id));\n    const coinData = await Promise.all(promises);\n    const coinPriceData = coinData.map(function (response) {\n      const coin = response.data;\n      return {\n        key: coin.id,\n        //rank: coin.rank,\n        rank: coin.market_cap_rank,\n        image: coin.image.small,\n        //name: coin.name,\n        ticker: coin.symbol,\n        balance: 0,\n        //price: formatPrice(coin.quotes.USD.price),\n        price: formatPrice(coin.market_data.current_price.usd),\n        //market_cap: coin.quotes.USD.market_cap,\n        market_cap: coin.market_data.market_cap.usd,\n        price_change_percentage_24h: coin.market_data.price_change_percentage_24h,\n        price_change_percentage_7d: coin.market_data.price_change_percentage_7d,\n        price_change_percentage_30d: coin.market_data.price_change_percentage_30d\n      };\n    }); //retrieve the price\n\n    setCoinData(coinPriceData);\n  };\n\n  useEffect(function () {\n    if (coinData.length === 0) {\n      componentDidMount();\n    }\n  });\n\n  const handleChangeBalance = () => {\n    setShowBalance(oldValue => !oldValue);\n  };\n\n  const addToBalance = 5000;\n\n  const handleAddToBalance = () => {\n    let newBalance = balance + addToBalance;\n    setBalance(newBalance);\n  };\n\n  const handleTransaction = (isBuy, valueChangeId) => {\n    var balanceChange = isBuy ? 1 : -1;\n    const newCoinData = coinData.map(function (values) {\n      let newValues = { ...values\n      };\n\n      if (valueChangeId == values.key) {\n        newValues.balance += balanceChange;\n        setBalance(oldBalance => oldBalance - balanceChange * newValues.price);\n      }\n\n      return newValues;\n    });\n    setCoinData(newCoinData);\n  };\n\n  const handleInfoPopup = () => {};\n\n  const handleRefresh = async valueChangeId => {\n    //const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\n    const tickerUrl = `https://api.coingecko.com/api/v3/coins/${valueChangeId}`;\n    const response = await axios.get(tickerUrl); //const newPrice = formatPrice(response.data.quotes.USD.price);\n\n    const newPrice = formatPrice(response.data.coin.market_data.current_price.usd);\n    const newCoinData = coinData.map(function (values) {\n      let newValues = { ...values\n      };\n\n      if (valueChangeId === values.key) {\n        newValues.price = newPrice;\n      }\n\n      return newValues;\n    });\n    setCoinData(newCoinData);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(AppHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(AccountBalance, {\n      amount: balance,\n      showBalance: showBalance,\n      handleChangeBalance: handleChangeBalance,\n      handleAddToBalance: handleAddToBalance\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(CoinList, {\n      coinData: coinData,\n      handleRefresh: handleRefresh,\n      showBalance: showBalance,\n      handleTransaction: handleTransaction,\n      handleInfoPopup: handleInfoPopup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 7\n  }, this);\n}\n\n_s(App, \"OPRtliv2edWbZ3dDWPIN12r7bpk=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","CoinList","AccountBalance","AppHeader","axios","COIN_COUNT","formatPrice","price","parseFloat","Number","toFixed","App","props","balance","setBalance","showBalance","setShowBalance","coinData","setCoinData","componentDidMount","response","get","coinIds","data","slice","map","coin","id","tickerUrl","promises","Promise","all","coinPriceData","key","rank","market_cap_rank","image","small","ticker","symbol","market_data","current_price","usd","market_cap","price_change_percentage_24h","price_change_percentage_7d","price_change_percentage_30d","length","handleChangeBalance","oldValue","addToBalance","handleAddToBalance","newBalance","handleTransaction","isBuy","valueChangeId","balanceChange","newCoinData","values","newValues","oldBalance","handleInfoPopup","handleRefresh","newPrice"],"sources":["C:/WebDev/IvanOnTech-Moralis/coin-exchange/src/App.js"],"sourcesContent":["import './App.css';\nimport React, {useEffect, useState} from 'react';\nimport CoinList from './components/CoinList/CoinList';\nimport AccountBalance from'./components/AccountBalance/AccountBalance';\nimport AppHeader from './components/AppHeader/AppHeader';\nimport axios from 'axios';\n\n\nconst COIN_COUNT = 10;\nconst formatPrice = price => parseFloat(Number(price).toFixed(3));\n\n\nfunction App (props) {\n\n  const [balance, setBalance] = useState(100000);\n  const [showBalance, setShowBalance] = useState(true);\n  const [coinData, setCoinData] = useState([]);\n\n\n  const componentDidMount = async () => {\n    //const response = await axios.get('https://api.coinpaprika.com/v1/coins');\n    const response = await axios.get('https://api.coingecko.com/api/v3/coins/');\n    const coinIds = response.data.slice(0, COIN_COUNT).map(coin => coin.id);\n    //const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\n    const tickerUrl = 'https://api.coingecko.com/api/v3/coins/';\n    const promises = coinIds.map(id => axios.get(tickerUrl + id));\n    const coinData = await Promise.all(promises);\n    const coinPriceData = coinData.map(function(response) {\n      const coin = response.data;\n      return {\n        key: coin.id,\n        //rank: coin.rank,\n        rank: coin.market_cap_rank,\n        image: coin.image.small,\n        //name: coin.name,\n        ticker: coin.symbol,\n        balance: 0,\n        //price: formatPrice(coin.quotes.USD.price),\n        price: formatPrice(coin.market_data.current_price.usd),\n\n        //market_cap: coin.quotes.USD.market_cap,\n        market_cap: coin.market_data.market_cap.usd,\n\n        price_change_percentage_24h: coin.market_data.price_change_percentage_24h,\n        price_change_percentage_7d: coin.market_data.price_change_percentage_7d,\n        price_change_percentage_30d: coin.market_data.price_change_percentage_30d,\n\n      };\n    })\n      //retrieve the price\n      setCoinData(coinPriceData);\n  }\n\n  useEffect(function() {\n    if (coinData.length === 0 ) {\n      componentDidMount();\n    }\n  });\n\n\n  const handleChangeBalance = () => {\n    setShowBalance(oldValue => !oldValue);\n  }\n\n  const addToBalance = 5000;\n  const handleAddToBalance = () => {\n    let newBalance = balance + addToBalance;\n    setBalance(newBalance);\n  }\n\n\n  const handleTransaction = (isBuy, valueChangeId) => {\n    var balanceChange = isBuy ? 1 : -1;\n    const newCoinData = coinData.map( function(values) {\n      let newValues = {...values};\n      if ( valueChangeId == values.key) {\n        newValues.balance += balanceChange;\n        setBalance( oldBalance => oldBalance - balanceChange * newValues.price );\n      }\n      return newValues;\n    })\n    setCoinData(newCoinData);\n  }\n\n  const handleInfoPopup = () => {\n\n  }\n\n\n  const handleRefresh = async (valueChangeId) => {\n    //const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\n    const tickerUrl = `https://api.coingecko.com/api/v3/coins/${valueChangeId}`;\n    const response = await axios.get(tickerUrl);\n    //const newPrice = formatPrice(response.data.quotes.USD.price);\n    const newPrice = formatPrice(response.data.coin.market_data.current_price.usd);\n    const newCoinData = coinData.map( function( values ) {\n      let newValues = { ...values };\n      if ( valueChangeId === values.key ) {\n        newValues.price = newPrice;\n      }\n      return newValues;\n    });\n   \n      setCoinData(newCoinData);\n  }\n    return (\n      <div className=\"App\">\n        <AppHeader />\n          <AccountBalance \n            amount={balance} \n            showBalance={showBalance} \n            handleChangeBalance={handleChangeBalance} \n            handleAddToBalance={handleAddToBalance}/>\n          <CoinList \n            coinData={coinData} \n            handleRefresh={handleRefresh} \n            showBalance={showBalance}\n            handleTransaction={handleTransaction} \n            handleInfoPopup={handleInfoPopup} />\n      </div>\n    );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"C:/WebDev-GitHubRepo/coin-exchange/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/WebDev-GitHubRepo/coin-exchange/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/WebDev-GitHubRepo/coin-exchange/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/WebDev-GitHubRepo/coin-exchange/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import React,{useEffect,useState}from'react';import CoinList from'./components/CoinList/CoinList';import AccountBalance from'./components/AccountBalance/AccountBalance';import AppHeader from'./components/AppHeader/AppHeader';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var COIN_COUNT=10;var formatPrice=function formatPrice(price){return parseFloat(Number(price).toFixed(3));};function App(props){var _useState=useState(100000),_useState2=_slicedToArray(_useState,2),balance=_useState2[0],setBalance=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showBalance=_useState4[0],setShowBalance=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),coinData=_useState6[0],setCoinData=_useState6[1];var componentDidMount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,coinIds,tickerUrl,promises,coinData,coinPriceData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://api.coingecko.com/api/v3/coins/');case 2:response=_context.sent;coinIds=response.data.slice(0,COIN_COUNT).map(function(coin){return coin.id;});//const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\ntickerUrl='https://api.coingecko.com/api/v3/coins/';promises=coinIds.map(function(id){return axios.get(tickerUrl+id);});_context.next=8;return Promise.all(promises);case 8:coinData=_context.sent;coinPriceData=coinData.map(function(response){var coin=response.data;return{key:coin.id,//rank: coin.rank,\nrank:coin.market_cap_rank,image:coin.image.small,name:coin.name,ticker:coin.symbol,balance:0,//price: formatPrice(coin.quotes.USD.price),\nprice:formatPrice(coin.market_data.current_price.usd),//market_cap: coin.quotes.USD.market_cap,\nmarket_cap:coin.market_data.market_cap.usd,price_change_percentage_24h:coin.market_data.price_change_percentage_24h,price_change_percentage_7d:coin.market_data.price_change_percentage_7d,price_change_percentage_30d:coin.market_data.price_change_percentage_30d};});//retrieve the price\nsetCoinData(coinPriceData);case 11:case\"end\":return _context.stop();}}},_callee);}));return function componentDidMount(){return _ref.apply(this,arguments);};}();useEffect(function(){if(coinData.length===0){componentDidMount();}});var handleChangeBalance=function handleChangeBalance(){setShowBalance(function(oldValue){return!oldValue;});};var addToBalance=5000;var handleAddToBalance=function handleAddToBalance(){var newBalance=balance+addToBalance;setBalance(newBalance);};var handleTransaction=function handleTransaction(isBuy,valueChangeId){var balanceChange=isBuy?1:-1;var newCoinData=coinData.map(function(values){var newValues=_objectSpread({},values);if(valueChangeId==values.key){newValues.balance+=balanceChange;setBalance(function(oldBalance){return oldBalance-balanceChange*newValues.price;});}return newValues;});setCoinData(newCoinData);};var handleInfoPopup=function handleInfoPopup(){};var handleRefresh=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(valueChangeId){var tickerUrl,response,newPrice,newCoinData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\ntickerUrl=\"https://api.coingecko.com/api/v3/coins/\".concat(valueChangeId);_context2.next=3;return axios.get(tickerUrl);case 3:response=_context2.sent;//const newPrice = formatPrice(response.data.quotes.USD.price);\nnewPrice=formatPrice(response.data.coin.market_data.current_price.usd);newCoinData=coinData.map(function(values){var newValues=_objectSpread({},values);if(valueChangeId===values.key){newValues.price=newPrice;}return newValues;});setCoinData(newCoinData);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRefresh(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(AppHeader,{}),/*#__PURE__*/_jsx(AccountBalance,{amount:balance,showBalance:showBalance,handleChangeBalance:handleChangeBalance,handleAddToBalance:handleAddToBalance}),/*#__PURE__*/_jsx(CoinList,{coinData:coinData,handleRefresh:handleRefresh,showBalance:showBalance,handleTransaction:handleTransaction,handleInfoPopup:handleInfoPopup})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","CoinList","AccountBalance","AppHeader","axios","COIN_COUNT","formatPrice","price","parseFloat","Number","toFixed","App","props","balance","setBalance","showBalance","setShowBalance","coinData","setCoinData","componentDidMount","get","response","coinIds","data","slice","map","coin","id","tickerUrl","promises","Promise","all","coinPriceData","key","rank","market_cap_rank","image","small","name","ticker","symbol","market_data","current_price","usd","market_cap","price_change_percentage_24h","price_change_percentage_7d","price_change_percentage_30d","length","handleChangeBalance","oldValue","addToBalance","handleAddToBalance","newBalance","handleTransaction","isBuy","valueChangeId","balanceChange","newCoinData","values","newValues","oldBalance","handleInfoPopup","handleRefresh","newPrice"],"sources":["C:/WebDev-GitHubRepo/coin-exchange/src/App.js"],"sourcesContent":["import './App.css';\nimport React, {useEffect, useState} from 'react';\nimport CoinList from './components/CoinList/CoinList';\nimport AccountBalance from'./components/AccountBalance/AccountBalance';\nimport AppHeader from './components/AppHeader/AppHeader';\nimport axios from 'axios';\n\n\nconst COIN_COUNT = 10;\nconst formatPrice = price => parseFloat(Number(price).toFixed(3));\n\n\nfunction App (props) {\n\n  const [balance, setBalance] = useState(100000);\n  const [showBalance, setShowBalance] = useState(true);\n  const [coinData, setCoinData] = useState([]);\n\n\n  const componentDidMount = async () => {\n    //const response = await axios.get('https://api.coinpaprika.com/v1/coins');\n    const response = await axios.get('https://api.coingecko.com/api/v3/coins/');\n    const coinIds = response.data.slice(0, COIN_COUNT).map(coin => coin.id);\n    //const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\n    const tickerUrl = 'https://api.coingecko.com/api/v3/coins/';\n    const promises = coinIds.map(id => axios.get(tickerUrl + id));\n    const coinData = await Promise.all(promises);\n    const coinPriceData = coinData.map(function(response) {\n      const coin = response.data;\n      return {\n        key: coin.id,\n        //rank: coin.rank,\n        rank: coin.market_cap_rank,\n        image: coin.image.small,\n        name: coin.name,\n        ticker: coin.symbol,\n        balance: 0,\n        //price: formatPrice(coin.quotes.USD.price),\n        price: formatPrice(coin.market_data.current_price.usd),\n\n        //market_cap: coin.quotes.USD.market_cap,\n        market_cap: coin.market_data.market_cap.usd,\n\n        price_change_percentage_24h: coin.market_data.price_change_percentage_24h,\n        price_change_percentage_7d: coin.market_data.price_change_percentage_7d,\n        price_change_percentage_30d: coin.market_data.price_change_percentage_30d,\n\n      };\n    })\n      //retrieve the price\n      setCoinData(coinPriceData);\n  }\n\n  useEffect(function() {\n    if (coinData.length === 0 ) {\n      componentDidMount();\n    }\n  });\n\n\n  const handleChangeBalance = () => {\n    setShowBalance(oldValue => !oldValue);\n  }\n\n  const addToBalance = 5000;\n  const handleAddToBalance = () => {\n    let newBalance = balance + addToBalance;\n    setBalance(newBalance);\n  }\n\n\n  const handleTransaction = (isBuy, valueChangeId) => {\n    var balanceChange = isBuy ? 1 : -1;\n    const newCoinData = coinData.map( function(values) {\n      let newValues = {...values};\n      if ( valueChangeId == values.key) {\n        newValues.balance += balanceChange;\n        setBalance( oldBalance => oldBalance - balanceChange * newValues.price );\n      }\n      return newValues;\n    })\n    setCoinData(newCoinData);\n  }\n\n  const handleInfoPopup = () => {\n\n  }\n\n\n  const handleRefresh = async (valueChangeId) => {\n    //const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\n    const tickerUrl = `https://api.coingecko.com/api/v3/coins/${valueChangeId}`;\n    const response = await axios.get(tickerUrl);\n    //const newPrice = formatPrice(response.data.quotes.USD.price);\n    const newPrice = formatPrice(response.data.coin.market_data.current_price.usd);\n    const newCoinData = coinData.map( function( values ) {\n      let newValues = { ...values };\n      if ( valueChangeId === values.key ) {\n        newValues.price = newPrice;\n      }\n      return newValues;\n    });\n   \n      setCoinData(newCoinData);\n  }\n    return (\n      <div className=\"App\">\n        <AppHeader />\n          <AccountBalance \n            amount={balance} \n            showBalance={showBalance} \n            handleChangeBalance={handleChangeBalance} \n            handleAddToBalance={handleAddToBalance}/>\n          <CoinList \n            coinData={coinData} \n            handleRefresh={handleRefresh} \n            showBalance={showBalance}\n            handleTransaction={handleTransaction} \n            handleInfoPopup={handleInfoPopup} />\n      </div>\n    );\n}\n\nexport default App;"],"mappings":"+eAAA,MAAO,WAAP,CACA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,SAAP,KAAqB,gCAArB,CACA,MAAOC,eAAP,KAA0B,4CAA1B,CACA,MAAOC,UAAP,KAAsB,kCAAtB,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,wFAGA,GAAMC,WAAU,CAAG,EAAnB,CACA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAAAC,KAAK,QAAIC,WAAU,CAACC,MAAM,CAACF,KAAD,CAAN,CAAcG,OAAd,CAAsB,CAAtB,CAAD,CAAd,EAAzB,CAGA,QAASC,IAAT,CAAcC,KAAd,CAAqB,CAEnB,cAA8BZ,QAAQ,CAAC,MAAD,CAAtC,wCAAOa,OAAP,eAAgBC,UAAhB,eACA,eAAsCd,QAAQ,CAAC,IAAD,CAA9C,yCAAOe,WAAP,eAAoBC,cAApB,eACA,eAAgChB,QAAQ,CAAC,EAAD,CAAxC,yCAAOiB,QAAP,eAAiBC,WAAjB,eAGA,GAAMC,kBAAiB,4FAAG,0NAEDf,MAAK,CAACgB,GAAN,CAAU,yCAAV,CAFC,QAElBC,QAFkB,eAGlBC,OAHkB,CAGRD,QAAQ,CAACE,IAAT,CAAcC,KAAd,CAAoB,CAApB,CAAuBnB,UAAvB,EAAmCoB,GAAnC,CAAuC,SAAAC,IAAI,QAAIA,KAAI,CAACC,EAAT,EAA3C,CAHQ,CAIxB;AACMC,SALkB,CAKN,yCALM,CAMlBC,QANkB,CAMPP,OAAO,CAACG,GAAR,CAAY,SAAAE,EAAE,QAAIvB,MAAK,CAACgB,GAAN,CAAUQ,SAAS,CAAGD,EAAtB,CAAJ,EAAd,CANO,uBAODG,QAAO,CAACC,GAAR,CAAYF,QAAZ,CAPC,QAOlBZ,QAPkB,eAQlBe,aARkB,CAQFf,QAAQ,CAACQ,GAAT,CAAa,SAASJ,QAAT,CAAmB,CACpD,GAAMK,KAAI,CAAGL,QAAQ,CAACE,IAAtB,CACA,MAAO,CACLU,GAAG,CAAEP,IAAI,CAACC,EADL,CAEL;AACAO,IAAI,CAAER,IAAI,CAACS,eAHN,CAILC,KAAK,CAAEV,IAAI,CAACU,KAAL,CAAWC,KAJb,CAKLC,IAAI,CAAEZ,IAAI,CAACY,IALN,CAMLC,MAAM,CAAEb,IAAI,CAACc,MANR,CAOL3B,OAAO,CAAE,CAPJ,CAQL;AACAN,KAAK,CAAED,WAAW,CAACoB,IAAI,CAACe,WAAL,CAAiBC,aAAjB,CAA+BC,GAAhC,CATb,CAWL;AACAC,UAAU,CAAElB,IAAI,CAACe,WAAL,CAAiBG,UAAjB,CAA4BD,GAZnC,CAcLE,2BAA2B,CAAEnB,IAAI,CAACe,WAAL,CAAiBI,2BAdzC,CAeLC,0BAA0B,CAAEpB,IAAI,CAACe,WAAL,CAAiBK,0BAfxC,CAgBLC,2BAA2B,CAAErB,IAAI,CAACe,WAAL,CAAiBM,2BAhBzC,CAAP,CAmBD,CArBqB,CARE,CA8BtB;AACA7B,WAAW,CAACc,aAAD,CAAX,CA/BsB,uDAAH,kBAAjBb,kBAAiB,0CAAvB,CAkCApB,SAAS,CAAC,UAAW,CACnB,GAAIkB,QAAQ,CAAC+B,MAAT,GAAoB,CAAxB,CAA4B,CAC1B7B,iBAAiB,GAClB,CACF,CAJQ,CAAT,CAOA,GAAM8B,oBAAmB,CAAG,QAAtBA,oBAAsB,EAAM,CAChCjC,cAAc,CAAC,SAAAkC,QAAQ,QAAI,CAACA,QAAL,EAAT,CAAd,CACD,CAFD,CAIA,GAAMC,aAAY,CAAG,IAArB,CACA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC/B,GAAIC,WAAU,CAAGxC,OAAO,CAAGsC,YAA3B,CACArC,UAAU,CAACuC,UAAD,CAAV,CACD,CAHD,CAMA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,KAAD,CAAQC,aAAR,CAA0B,CAClD,GAAIC,cAAa,CAAGF,KAAK,CAAG,CAAH,CAAO,CAAC,CAAjC,CACA,GAAMG,YAAW,CAAGzC,QAAQ,CAACQ,GAAT,CAAc,SAASkC,MAAT,CAAiB,CACjD,GAAIC,UAAS,kBAAOD,MAAP,CAAb,CACA,GAAKH,aAAa,EAAIG,MAAM,CAAC1B,GAA7B,CAAkC,CAChC2B,SAAS,CAAC/C,OAAV,EAAqB4C,aAArB,CACA3C,UAAU,CAAE,SAAA+C,UAAU,QAAIA,WAAU,CAAGJ,aAAa,CAAGG,SAAS,CAACrD,KAA3C,EAAZ,CAAV,CACD,CACD,MAAOqD,UAAP,CACD,CAPmB,CAApB,CAQA1C,WAAW,CAACwC,WAAD,CAAX,CACD,CAXD,CAaA,GAAMI,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAE7B,CAFD,CAKA,GAAMC,cAAa,6FAAG,kBAAOP,aAAP,oKACpB;AACM5B,SAFc,kDAEwC4B,aAFxC,yBAGGpD,MAAK,CAACgB,GAAN,CAAUQ,SAAV,CAHH,QAGdP,QAHc,gBAIpB;AACM2C,QALc,CAKH1D,WAAW,CAACe,QAAQ,CAACE,IAAT,CAAcG,IAAd,CAAmBe,WAAnB,CAA+BC,aAA/B,CAA6CC,GAA9C,CALR,CAMde,WANc,CAMAzC,QAAQ,CAACQ,GAAT,CAAc,SAAUkC,MAAV,CAAmB,CACnD,GAAIC,UAAS,kBAAQD,MAAR,CAAb,CACA,GAAKH,aAAa,GAAKG,MAAM,CAAC1B,GAA9B,CAAoC,CAClC2B,SAAS,CAACrD,KAAV,CAAkByD,QAAlB,CACD,CACD,MAAOJ,UAAP,CACD,CANmB,CANA,CAclB1C,WAAW,CAACwC,WAAD,CAAX,CAdkB,wDAAH,kBAAbK,cAAa,6CAAnB,CAgBE,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,SAAD,IADF,cAEI,KAAC,cAAD,EACE,MAAM,CAAElD,OADV,CAEE,WAAW,CAAEE,WAFf,CAGE,mBAAmB,CAAEkC,mBAHvB,CAIE,kBAAkB,CAAEG,kBAJtB,EAFJ,cAOI,KAAC,QAAD,EACE,QAAQ,CAAEnC,QADZ,CAEE,aAAa,CAAE8C,aAFjB,CAGE,WAAW,CAAEhD,WAHf,CAIE,iBAAiB,CAAEuC,iBAJrB,CAKE,eAAe,CAAEQ,eALnB,EAPJ,GADF,CAgBH,CAED,cAAenD,IAAf"},"metadata":{},"sourceType":"module"}
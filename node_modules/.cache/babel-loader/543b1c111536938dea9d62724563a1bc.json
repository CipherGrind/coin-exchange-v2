{"ast":null,"code":"var _jsxFileName = \"C:\\\\WebDev\\\\IvanOnTech-Moralis\\\\coin-exchange\\\\src\\\\App.js\";\nimport './App.css';\nimport React from 'react';\nimport CoinList from './components/CoinList/CoinList';\nimport AccountBalance from './components/AccountBalance/AccountBalance';\nimport AppHeader from './components/AppHeader/AppHeader';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COIN_COUNT = 10;\n\nconst formatPrice = price => parseFloat(Number(price).toFixed(3));\n\nclass App extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      balance: 10000,\n      showBalance: true,\n      coinData: []\n    };\n\n    this.componentDidMount = async () => {\n      const response = await axios.get('https://api.coinpaprika.com/v1/coins');\n      const coinIds = response.data.slice(0, COIN_COUNT).map(coin => coin.id);\n      const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\n      const promises = coinIds.map(id => axios.get(tickerUrl + id));\n      const coinData = await Promise.all(promises);\n      const coinPriceData = coinData.map(function (response) {\n        const coin = response.data;\n        return {\n          key: coin.id,\n          name: coin.name,\n          ticker: coin.symbol,\n          balance: 0,\n          price: formatPrice(coin.quotes.USD.price)\n        };\n      }); //retrieve the price\n\n      this.setState({\n        coinData: coinPriceData\n      });\n    };\n\n    this.handleChangeBalance = event => {\n      event.preventDefault();\n      this.setState(function (oldState) {\n        return { ...oldState,\n          showBalance: !oldState.showBalance\n        };\n      });\n    };\n\n    this.handleRefresh = async valueChangeId => {\n      const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\n      const response = await axios.get(tickerUrl);\n      debugger;\n      const newPrice = formatPrice(response.data.quotes.USD.price);\n      const newCoinData = this.state.coinData.map(function (values) {\n        let newValues = { ...values\n        };\n\n        if (valueChangeId === values.ticker) {\n          newValues.price = newPrice;\n        }\n\n        return newValues;\n      });\n      this.setState({\n        coinData: newCoinData\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(AppHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AccountBalance, {\n        amount: this.state.balance,\n        showBalance: this.state.showBalance,\n        handleChangeBalance: this.handleChangeBalance\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(CoinList, {\n        coinData: this.state.coinData,\n        handleRefresh: this.handleRefresh,\n        showBalance: this.state.showBalance\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","CoinList","AccountBalance","AppHeader","axios","COIN_COUNT","formatPrice","price","parseFloat","Number","toFixed","App","Component","state","balance","showBalance","coinData","componentDidMount","response","get","coinIds","data","slice","map","coin","id","tickerUrl","promises","Promise","all","coinPriceData","key","name","ticker","symbol","quotes","USD","setState","handleChangeBalance","event","preventDefault","oldState","handleRefresh","valueChangeId","newPrice","newCoinData","values","newValues","render"],"sources":["C:/WebDev/IvanOnTech-Moralis/coin-exchange/src/App.js"],"sourcesContent":["import './App.css';\nimport React from 'react';\nimport CoinList from './components/CoinList/CoinList';\nimport AccountBalance from'./components/AccountBalance/AccountBalance';\nimport AppHeader from './components/AppHeader/AppHeader';\nimport axios from 'axios';\n\n\nconst COIN_COUNT = 10;\nconst formatPrice = price => parseFloat(Number(price).toFixed(3));\n\n\nclass App extends React.Component {\n\n  state = {\n    balance: 10000,\n    showBalance: true,\n    coinData: [\n\n    ]\n  }\n\n  componentDidMount = async () => {\n    const response = await axios.get('https://api.coinpaprika.com/v1/coins');\n    const coinIds = response.data.slice(0, COIN_COUNT).map(coin => coin.id);\n    const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\n    const promises = coinIds.map(id => axios.get(tickerUrl + id));\n    const coinData = await Promise.all(promises);\n    const coinPriceData = coinData.map(function(response) {\n      const coin = response.data;\n      return {\n        key: coin.id,\n        name: coin.name,\n        ticker: coin.symbol,\n        balance: 0,\n        price: formatPrice(coin.quotes.USD.price),\n      };\n    })\n    //retrieve the price\n    this.setState({ coinData: coinPriceData });\n  }\n\n  handleChangeBalance = (event) => {\n    event.preventDefault();\n    this.setState( function(oldState) {\n      return {\n        ...oldState,\n        showBalance: !oldState.showBalance\n      }\n    });\n  }\n\n  handleRefresh = async (valueChangeId) => {\n    const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\n    const response = await axios.get(tickerUrl);\n    debugger;\n    const newPrice = formatPrice(response.data.quotes.USD.price);\n    const newCoinData = this.state.coinData.map( function( values ) {\n      let newValues = { ...values };\n      if ( valueChangeId === values.ticker ) {\n        newValues.price = newPrice;\n      }\n      return newValues;\n    });\n   \n      this.setState({ coinData: newCoinData });\n  }\n    render() {\n      return (\n        <div className=\"App\">\n          <AppHeader />\n            <AccountBalance \n              amount={this.state.balance} \n              showBalance={this.state.showBalance} \n              handleChangeBalance={this.handleChangeBalance} />\n            <CoinList \n              coinData={this.state.coinData} \n              handleRefresh={this.handleRefresh} \n              showBalance={this.state.showBalance} />\n        </div>\n      );\n    }\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}